@tailwind base;
@tailwind components;
@tailwind utilities;

/* 自定义样式 */
@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    @apply antialiased;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  }

  .app-background {
    background:
      radial-gradient(120% 120% at 10% 0%, rgba(59, 130, 246, 0.08) 0%, rgba(59, 130, 246, 0) 55%),
      radial-gradient(140% 140% at 90% 0%, rgba(16, 185, 129, 0.06) 0%, rgba(16, 185, 129, 0) 50%),
      linear-gradient(180deg, #f8fbff 0%, #ffffff 65%);
  }
}

@layer components {
  .app-shell {
    @apply max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-10;
  }

  .dashboard {
    @apply flex-1 w-full py-10;
  }

  .dashboard-layout {
    @apply w-full;
  }

  .dashboard-content {
    @apply flex flex-col gap-8;
  }

  .dashboard-header {
    @apply flex flex-col gap-4;
  }

  @screen lg {
    .dashboard-header {
      @apply flex-row items-center justify-between;
    }
  }

  .navbar {
    @apply sticky top-0 z-50 bg-white/90 border-b border-white/60 backdrop-blur-lg;
    box-shadow: 0 18px 36px -28px rgba(15, 23, 42, 0.35);
  }

  .brand-badge {
    @apply flex items-center justify-center w-11 h-11 rounded-3xl text-blue-600;
    background: linear-gradient(135deg, #ecf2ff 0%, #dbeafe 100%);
    border: 1px solid rgba(59, 130, 246, 0.22);
    box-shadow: 0 18px 42px -28px rgba(37, 99, 235, 0.6);
  }

  .btn {
    @apply inline-flex items-center gap-2 rounded-xl px-5 py-2.5 font-medium transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-0;
  }

  .btn-primary {
    color: #fff;
    background: linear-gradient(135deg, #2563eb 0%, #4338ca 100%);
    box-shadow: 0 18px 38px -20px rgba(37, 99, 235, 0.75);
  }

  .btn-primary:hover {
    box-shadow: 0 24px 45px -20px rgba(37, 99, 235, 0.78);
    transform: translateY(-1px);
  }

  .btn-primary:active {
    transform: translateY(0);
  }

  .btn-secondary {
    @apply text-gray-600 bg-white border border-gray-200;
    box-shadow: 0 18px 32px -28px rgba(15, 23, 42, 0.2);
  }

  .btn-secondary:hover {
    @apply text-gray-800 border-gray-300;
    box-shadow: 0 24px 38px -28px rgba(15, 23, 42, 0.28);
  }

  .btn-danger {
    color: #fff;
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    box-shadow: 0 18px 36px -24px rgba(239, 68, 68, 0.55);
  }

  .btn-danger:hover {
    box-shadow: 0 24px 42px -22px rgba(239, 68, 68, 0.65);
  }

  .btn-ghost {
    @apply text-gray-600 hover:text-gray-800;
    background: rgba(148, 163, 184, 0.1);
  }

  .btn-icon {
    @apply inline-flex items-center justify-center rounded-xl p-2.5 text-gray-500 transition-all duration-150;
  }

  .btn-icon:hover {
    @apply text-blue-600 bg-blue-50;
    box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.12);
  }

  .card-modern {
    @apply relative bg-white rounded-3xl;
    border: 1px solid rgba(148, 163, 184, 0.18);
    box-shadow: 0 28px 55px -35px rgba(30, 64, 175, 0.35);
    transition: box-shadow 0.3s ease, transform 0.3s ease, border-color 0.3s ease;
  }

  .card-modern:hover {
    box-shadow: 0 38px 70px -38px rgba(30, 64, 175, 0.4);
    border-color: rgba(59, 130, 246, 0.25);
    transform: translateY(-2px);
  }

  .card-gradient {
    @apply relative rounded-3xl px-6 py-8 text-gray-500;
    border: 1px dashed rgba(59, 130, 246, 0.25);
    background: linear-gradient(145deg, rgba(59, 130, 246, 0.08), rgba(59, 130, 246, 0.02));
    box-shadow: 0 25px 55px -40px rgba(30, 64, 175, 0.28);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }

  .card-gradient:hover {
    border-color: rgba(59, 130, 246, 0.35);
    box-shadow: 0 32px 70px -45px rgba(30, 64, 175, 0.3);
  }

  .surface-card {
    @apply rounded-3xl border border-slate-200/60 bg-white;
    box-shadow: 0 26px 48px -40px rgba(15, 23, 42, 0.35);
  }

  .sidebar-panel {
    @apply p-5 space-y-4;
    position: sticky;
    top: 110px;
  }

  @media (max-width: 1023px) {
    .sidebar-panel {
      position: static;
    }
  }

  .metric-pill {
    @apply flex items-center gap-2 px-4 py-2 rounded-2xl border border-slate-200/70 bg-white/80;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
  }

  .metric-pill__value {
    @apply text-lg font-semibold text-slate-800;
  }

  .metric-pill__label {
    @apply text-xs text-slate-500;
  }

  .insights-grid {
    @apply grid gap-5;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    align-items: stretch;
  }

  .search-card {
    @apply flex items-center gap-4 px-6 py-4;
  }

  .search-card__icon {
    @apply w-6 h-6 text-blue-400;
  }

  .search-card__input {
    @apply flex-1 bg-transparent border-0 shadow-none focus:ring-0 text-base;
  }

  .quick-card {
    @apply px-5 py-4 flex flex-col gap-3;
  }

  .quick-card__title {
    @apply text-lg font-semibold text-gray-900;
  }

  .quick-card__list {
    @apply space-y-2;
  }

  .quick-card__item {
    @apply flex items-center justify-between;
  }

  .quick-card__value {
    @apply text-sm font-semibold;
  }

  .input-modern {
    @apply w-full px-4 py-3 bg-white;
    @apply border border-gray-200 rounded-2xl;
    @apply focus:ring-2 focus:ring-blue-300/60 focus:border-blue-400;
    @apply outline-none transition-all duration-200;
    @apply placeholder:text-gray-400;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
  }

  .select-modern {
    @apply w-full px-4 py-3 bg-white;
    @apply border border-gray-200 rounded-2xl;
    @apply focus:ring-2 focus:ring-blue-300/60 focus:border-blue-400;
    @apply outline-none transition-all duration-200 cursor-pointer;
  }

  .label-modern {
    @apply block text-sm font-medium text-gray-600 mb-1.5;
  }

  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply bg-blue-50 text-blue-600 border border-blue-200;
    box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.1);
  }

  .badge-success {
    @apply bg-emerald-50 text-emerald-600 border border-emerald-200;
    box-shadow: inset 0 0 0 1px rgba(16, 185, 129, 0.12);
  }

  .badge-warning {
    @apply bg-amber-50 text-amber-600 border border-amber-200;
    box-shadow: inset 0 0 0 1px rgba(251, 191, 36, 0.12);
  }

  .badge-danger {
    @apply bg-rose-50 text-rose-600 border border-rose-200;
    box-shadow: inset 0 0 0 1px rgba(244, 63, 94, 0.12);
  }

  .category-counter {
    @apply min-w-[32px] text-center px-2.5 py-1 text-xs font-semibold text-blue-600 bg-blue-50 border border-blue-200 rounded-full;
    box-shadow: 0 12px 24px -18px rgba(59, 130, 246, 0.4);
  }

  .sidebar-item {
    @apply relative w-full text-left px-4 py-3 rounded-2xl transition-all duration-200 flex items-center gap-3 border border-transparent text-gray-600;
  }

  .sidebar-item:hover {
    @apply bg-white border-gray-200 text-gray-800;
    box-shadow: 0 14px 28px -26px rgba(15, 23, 42, 0.3);
  }

  .sidebar-item-active {
    @apply bg-white text-blue-600;
    border: 1px solid rgba(59, 130, 246, 0.25);
    box-shadow: 0 22px 45px -28px rgba(37, 99, 235, 0.35);
  }

  .category-entry {
    --category-color: #4F46E5;
    @apply relative overflow-hidden;
  }

  .category-entry__icon {
    @apply flex h-10 w-10 shrink-0 items-center justify-center rounded-2xl text-xl font-semibold text-white transition-transform duration-200;
    background: var(--category-color);
    background: linear-gradient(135deg, color-mix(in srgb, var(--category-color) 78%, #ffffff 22%), color-mix(in srgb, var(--category-color) 92%, #1f2937 8%));
    box-shadow: 0 20px 40px -28px rgba(59, 130, 246, 0.55);
  }

  .category-entry:hover .category-entry__icon {
    transform: translateY(-1px) scale(1.05);
  }

  .sidebar-item-active .category-entry__icon {
    box-shadow: 0 26px 48px -24px rgba(59, 130, 246, 0.6);
  }

  .category-entry__details {
    @apply flex flex-1 flex-col gap-1 text-left;
  }

  .category-entry__name {
    @apply text-sm font-medium text-gray-700;
  }

  .sidebar-item-active .category-entry__name {
    @apply text-blue-600;
  }

  .category-entry__meta {
    @apply text-xs uppercase text-gray-400;
    letter-spacing: 0.18em;
  }

  .sidebar-item-active .category-entry__meta {
    @apply text-blue-500;
  }

  .category-entry__emoji {
    @apply leading-none;
  }

  .category-entry__edit {
    @apply ml-1 opacity-0 group-hover:opacity-100 text-gray-400 transition-opacity focus:outline-none;
  }

  .category-entry__edit:hover {
    @apply text-blue-600;
  }

  .task-grid {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fit, minmax(280px, 360px));
    justify-content: flex-start;nt: flex-start;
  }

  .task-item {
    @apply relative flex flex-col justify-between gap-4 rounded-3xl border border-slate-200/60 bg-white/90 px-5 py-5 transition-all duration-200 max-w-[360px] min-h-[240px];
    box-shadow: 0 22px 45px -38px rgba(30, 64, 175, 0.25);
  }

  .task-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 32px 60px -34px rgba(30, 64, 175, 0.32);
  }

  .task-item--disabled {
    @apply opacity-70;
  }

  .task-item__header {
    @apply flex items-start justify-between gap-3;
    min-height: 48px;
  }

  .task-item__primary {
    @apply flex items-start gap-3 min-w-0 flex-1;
  }

  .task-item__text {
    @apply flex-1 min-w-0;
  }

  .task-item__title {
    @apply text-base font-semibold text-slate-900;
  }

  .task-item__desc {
    @apply text-sm text-slate-500 mt-1;
    white-space: nowrap;
  }

  .task-item__meta {
    @apply flex items-center gap-2 flex-shrink-0;
    align-self: flex-start;
    padding-top: 0;
    margin-top: -5px;
  }


  .task-item__actions {
    @apply flex items-center gap-1;
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .task-item:hover .task-item__actions,
  .task-item:focus-within .task-item__actions {
    opacity: 1;
  }

  @media (max-width: 1023px) {
    .task-item__actions {
      opacity: 1;
    }
  }

  .task-item__timeline {
    @apply relative flex items-stretch gap-4;
  }

  .task-timeline__bar {
    @apply absolute left-3 top-1 bottom-1 w-0.5 bg-gradient-to-b from-blue-200 via-blue-100 to-transparent rounded-full;
  }

  .task-timeline__content {
    @apply flex-1 space-y-2 pl-6 text-sm;
  }

  .task-timeline__row {
    @apply relative grid items-center gap-3 bg-slate-50/70 border border-slate-200 rounded-2xl px-4 py-2;
    grid-template-columns: 48px 1fr;
  }

  .task-timeline__row--accent {
    @apply bg-blue-50/80 border-blue-100;
  }

  .task-timeline__dot {
    @apply absolute left-[-24px] w-3 h-3 rounded-full bg-white border border-blue-300 shadow;
  }

  .task-timeline__row--accent .task-timeline__dot {
    @apply bg-blue-500 border-blue-500 shadow-lg;
  }

  .task-timeline__row--success .task-timeline__dot {
    @apply bg-green-500 border-green-500;
  }

  .task-timeline__row--error .task-timeline__dot {
    @apply bg-red-500 border-red-500;
  }

  .task-timeline__label {
    @apply text-xs font-semibold text-slate-400 uppercase tracking-wider text-right;
  }

  .task-timeline__value {
    @apply text-sm font-medium text-slate-700 leading-relaxed;
  }

  .task-item--disabled .task-timeline__row {
    @apply opacity-70;
  }

  .empty-card {
    @apply px-8 py-10 flex flex-col items-center gap-4;
  }

  .empty-card__icon {
    @apply inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-50;
  }

  /* 执行日志面板样式 */
  .execution-logs-panel {
    @apply p-4 space-y-3;
  }

  .execution-logs-header {
    @apply flex items-center justify-between pb-3 border-b border-gray-100;
  }

  .execution-logs-content {
    @apply overflow-y-auto;
    max-height: 220px; /* 固定高度，约等于5个日志项 */
    min-height: 100px; /* 最小高度确保美观 */
  }

  .execution-log-item {
    @apply p-2 rounded-lg border;
    @apply transition-all duration-150;
  }

  .execution-log-item.log-success {
    @apply bg-green-50 border-green-200;
  }

  .execution-log-item.log-failed {
    @apply bg-red-50 border-red-200;
  }

  .execution-log-item:hover {
    @apply shadow-sm;
  }

  .execution-logs-footer {
    @apply pt-3 border-t border-gray-100 text-center;
  }

  .modal-backdrop {
    @apply fixed inset-0 bg-black/35 backdrop-blur-sm;
    @apply flex items-center justify-center p-4 z-50;
  }

  .modal-content {
    @apply bg-white rounded-3xl border border-white/80;
    @apply w-full max-h-[90vh] overflow-y-auto shadow-2xl;
    max-width: min(820px, 92vw);
  }

  .category-modal__container {
    max-width: min(880px, 94vw);
  }

  .modal-form {
    @apply flex flex-col min-h-full bg-gradient-to-b from-white to-slate-50/60;
  }

  .modal-header {
    @apply flex items-start justify-between gap-3 px-5 py-3 border-b border-gray-100;
  }

  .modal-title {
    @apply text-lg font-bold text-gray-800;
  }

  .modal-subtitle {
    @apply mt-0.5 text-xs text-gray-500 leading-relaxed max-w-2xl;
  }

  .modal-close {
    @apply h-10 w-10 flex items-center justify-center rounded-2xl bg-gray-100 text-gray-500 transition-all duration-200;
  }

  .modal-close:hover {
    @apply bg-gray-200 text-gray-700;
  }

  .modal-body {
    @apply flex-1 overflow-y-auto px-5 py-2 space-y-2;
  }

  .modal-body--two-column {
    @apply grid gap-3;
  }

  @media (min-width: 768px) {
    .modal-body--two-column {
      grid-template-columns: 1fr 1fr;
    }
  }

  .modal-column {
    @apply flex flex-col;
  }

  .form-stack {
    @apply flex flex-col gap-3;
  }

  .section-card {
    @apply rounded-xl border border-gray-100 bg-white/95 shadow-sm p-3 space-y-2;
    box-shadow: 0 12px 25px -20px rgba(15, 23, 42, 0.15);
  }

  .section-card--compact {
    @apply p-2.5 space-y-1.5;
  }

  .section-title {
    @apply text-base font-semibold text-gray-800 flex items-center gap-2;
  }

  .section-subtitle {
    @apply text-sm text-gray-400;
  }

  .form-grid {
    @apply grid gap-3;
  }

  .form-grid--compact {
    @apply gap-2;
  }

  @screen md {
    .form-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  .form-grid--split {
    @apply grid gap-3;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  }

  .form-field {
    @apply flex flex-col gap-2;
  }

  .form-field--full {
    grid-column: 1 / -1;
  }

  .form-field--split {
    grid-column: 1 / -1;
  }

  .form-field--inline {
    @apply flex items-center text-gray-600;
  }

  .inline-pill {
    @apply inline-flex flex-wrap items-center gap-3 rounded-full bg-white border border-gray-200 px-4 py-2 shadow-sm;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4);
    max-width: min(100%, 420px);
  }

  .inline-pill__prefix,
  .inline-pill__suffix {
    @apply text-sm text-gray-500 whitespace-nowrap;
  }

  .inline-pill__hint {
    @apply w-full text-xs text-gray-400 border-t border-dashed border-gray-200 pt-1 mt-1 text-center;
  }

  .inline-pill__input {
    @apply w-20 text-center border-none shadow-none bg-transparent text-gray-700 font-semibold;
  }

  .inline-pill__input:focus {
    @apply ring-0 outline-none;
  }

  .input-compact {
    @apply w-20 text-center;
  }

  .textarea-modern {
    @apply min-h-[80px] resize-none;
  }

  .schedule-panels {
    @apply space-y-3;
  }

  .schedule-panel {
    @apply flex flex-col gap-2 rounded-xl border border-gray-100 bg-slate-50/60 p-3;
  }

  .schedule-panel--compact {
    @apply p-2.5 gap-2;
  }

  .panel-title {
    @apply text-sm font-semibold text-gray-700;
  }

  .panel-note {
    @apply text-xs text-gray-400;
  }

  .weekday-picker {
    @apply grid grid-cols-7 gap-2;
  }

  .weekday-pill {
    @apply cursor-pointer;
  }

  .weekday-pill span {
    @apply block rounded-2xl border border-gray-200 bg-white px-3 py-1 text-sm text-gray-600 text-center transition-all duration-200;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
  }

  .weekday-pill__input {
    @apply hidden;
  }

  .weekday-pill__input:checked + span {
    @apply border-blue-500 bg-blue-500 text-white shadow;
  }

  .schedule-preview {
    @apply mt-3 rounded-2xl border border-blue-100 bg-blue-50/80 p-4 space-y-2;
  }

  .preview-title {
    @apply text-sm font-semibold text-blue-600;
  }

  .preview-items {
    @apply text-xs text-blue-500 leading-relaxed space-y-1;
  }

  .modal-footer {
    @apply flex justify-end gap-3 px-5 py-2.5 border-t border-gray-100 bg-white;
  }

  .modal-btn {
    @apply px-6 py-2.5 rounded-xl transition-all duration-200 text-sm font-medium;
  }

  .modal-btn--ghost {
    @apply text-gray-600 hover:bg-gray-100;
  }

  .modal-btn--primary {
    color: #fff;
    background: linear-gradient(135deg, #2563eb 0%, #4338ca 100%);
    box-shadow: 0 20px 38px -24px rgba(37, 99, 235, 0.55);
  }

  .modal-btn--primary:hover {
    box-shadow: 0 26px 48px -24px rgba(37, 99, 235, 0.65);
    transform: translateY(-1px);
  }

  .modal-btn--primary:active {
    transform: translateY(0);
  }

  /* 设备管理模态框样式 */
  .device-modal__container {
    max-width: min(900px, 94vw);
  }

  .device-modal__body {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .device-modal__section {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    border-radius: 1.25rem;
    border: 1px solid rgba(226, 232, 240, 0.7);
    background: linear-gradient(135deg, rgba(248, 250, 252, 0.94), #ffffff);
    box-shadow: 0 26px 48px -36px rgba(15, 23, 42, 0.25);
    padding: 1.25rem 1.5rem;
  }

  .device-modal__heading {
    display: flex;
    flex-wrap: wrap;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1rem;
  }

  .device-modal__heading-main {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex: 1 1 0;
    min-width: 0;
  }

  .device-modal__icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 3.25rem;
    height: 3.25rem;
    border-radius: 1.1rem;
    color: #2563eb;
    background: linear-gradient(135deg, #e0e7ff, #dbeafe);
    box-shadow: 0 24px 48px -32px rgba(59, 130, 246, 0.4);
  }

  .device-modal__icon-svg {
    width: 1.75rem;
    height: 1.75rem;
  }

  .device-modal__title {
    font-size: 1.05rem;
    font-weight: 600;
    color: #1f2937;
  }

  .device-modal__desc {
    margin-top: 0.25rem;
    font-size: 0.85rem;
    line-height: 1.5;
    color: #64748b;
  }

  .device-modal__metrics {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    text-align: right;
    gap: 0.15rem;
    min-width: 72px;
  }

  .device-modal__metrics-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: #2563eb;
  }

  .device-modal__metrics-label {
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: #94a3b8;
  }

  .device-card-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .device-card {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 1rem;
    border-radius: 1.25rem;
    border: 1px solid rgba(226, 232, 240, 0.7);
    background: rgba(255, 255, 255, 0.92);
    padding: 1rem 1.25rem;
    box-shadow: 0 22px 42px -32px rgba(30, 64, 175, 0.32);
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  }

  .device-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 28px 52px -30px rgba(30, 64, 175, 0.36);
    border-color: rgba(191, 219, 254, 0.9);
  }

  .device-card--default {
    border-color: rgba(59, 130, 246, 0.45);
    background: linear-gradient(135deg, rgba(239, 246, 255, 0.95), #ffffff);
  }

  .device-card__main {
    display: flex;
    align-items: center;
    gap: 0.9rem;
    flex: 1 1 auto;
    min-width: 0;
  }

  .device-card__avatar {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 3rem;
    height: 3rem;
    border-radius: 1rem;
    background: rgba(219, 234, 254, 0.7);
    box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.16);
  }

  .device-card__emoji {
    font-size: 1.5rem;
    line-height: 1;
  }

  .device-card__info {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
    min-width: 0;
  }

  .device-card__title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1rem;
    font-weight: 600;
    color: #1f2937;
  }

  .device-card__badge {
    margin-left: 0.25rem;
  }

  .device-card__meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem 0.75rem;
    font-size: 0.82rem;
    color: #64748b;
  }

  .device-card__tag {
    padding: 0.2rem 0.65rem;
    border-radius: 9999px;
    background: rgba(226, 232, 240, 0.6);
    color: #1d4ed8;
    font-weight: 500;
  }

  .device-card__status {
    display: inline-flex;
    align-items: center;
    padding: 0.15rem 0.6rem;
    border-radius: 9999px;
    border: 1px solid rgba(226, 232, 240, 0.9);
    font-size: 0.75rem;
    font-weight: 500;
    color: #475569;
    background-color: rgba(241, 245, 249, 0.7);
  }

  .device-card__status--online {
    border-color: rgba(134, 239, 172, 0.55);
    background: rgba(220, 252, 231, 0.7);
    color: #047857;
  }

  .device-card__status--offline {
    border-color: rgba(248, 113, 113, 0.4);
    background: rgba(254, 226, 226, 0.6);
    color: #dc2626;
  }

  .device-card__actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-shrink: 0;
  }

  .device-card__button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 0.95rem;
    border-radius: 0.9rem;
    font-size: 0.875rem;
    font-weight: 500;
    border: 1px solid transparent;
    transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  }

  .device-card__button--test {
    color: #2563eb;
    background-color: rgba(219, 234, 254, 0.7);
    border-color: rgba(191, 219, 254, 0.8);
    box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.08);
  }

  .device-card__button--test:hover {
    background-color: rgba(191, 219, 254, 0.9);
  }

  .device-card__button--danger {
    color: #dc2626;
    background-color: rgba(254, 226, 226, 0.65);
    border-color: rgba(248, 113, 113, 0.55);
  }

  .device-card__button--danger:hover {
    background-color: rgba(252, 165, 165, 0.7);
  }

  .device-modal__empty {
    text-align: center;
    gap: 1rem;
  }

  .device-modal__empty-icon {
    width: 2.5rem;
    height: 2.5rem;
    color: #2563eb;
  }

  .device-modal__empty-title {
    font-size: 1rem;
    font-weight: 600;
    color: #1f2937;
  }

  .device-modal__empty-desc {
    margin-top: 0.35rem;
    font-size: 0.85rem;
    color: #64748b;
  }

  .device-modal__form-header {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
  }

  .device-modal__form-title {
    font-size: 1rem;
    font-weight: 600;
    color: #1f2937;
  }

  .device-modal__form-desc {
    font-size: 0.85rem;
    line-height: 1.5;
    color: #64748b;
  }

  .device-modal__form-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .device-modal__hint {
    margin-top: 0.35rem;
    font-size: 0.75rem;
    color: #94a3b8;
  }

  .device-modal__submit {
    width: 100%;
    border-radius: 0.9rem;
    padding: 0.75rem 1rem;
    font-size: 0.95rem;
    font-weight: 600;
    color: #ffffff;
    background: linear-gradient(135deg, #2563eb, #4338ca);
    box-shadow: 0 22px 44px -28px rgba(37, 99, 235, 0.55);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .device-modal__submit:hover {
    transform: translateY(-1px);
    box-shadow: 0 28px 52px -28px rgba(37, 99, 235, 0.65);
  }

  .device-modal__submit:active {
    transform: translateY(0);
  }

  @media (min-width: 1024px) {
    .device-modal__body {
      flex-direction: row;
      align-items: flex-start;
      gap: 1.5rem;
    }

    .device-modal__body > .device-modal__section:first-child {
      flex: 1.35 1 0;
    }

    .device-modal__body > .device-modal__section:last-child {
      flex: 1 1 0;
    }
  }

  .category-modal {
    @apply flex flex-col;
  }

  .category-modal__header {
    @apply flex flex-col gap-6 md:flex-row md:items-center md:justify-between;
  }

  .category-modal__header > div:first-child {
    @apply flex-1;
  }

  .category-modal__status {
    @apply text-xs font-semibold uppercase text-blue-500;
    letter-spacing: 0.35em;
  }

  .category-modal__title {
    @apply mt-2 text-2xl font-bold text-gray-800;
  }

  .category-preview {
    --preview-color: #4F46E5;
    @apply relative flex items-center gap-4 rounded-3xl px-6 py-5 text-white overflow-hidden md:flex-1;
    background: linear-gradient(135deg, var(--preview-color), var(--preview-color));
    background: linear-gradient(135deg, color-mix(in srgb, var(--preview-color) 70%, #ffffff 30%), color-mix(in srgb, var(--preview-color) 92%, #1e1b4b 8%));
    box-shadow: 0 24px 45px -32px rgba(59, 130, 246, 0.5);
  }

  .category-preview::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 80% 10%, rgba(255, 255, 255, 0.28) 0%, transparent 55%);
    opacity: 0.8;
    pointer-events: none;
  }

  .category-preview__icon {
    @apply relative z-10 flex h-12 w-12 items-center justify-center rounded-2xl text-2xl font-semibold;
    background: rgba(255, 255, 255, 0.18);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.35);
  }

  .category-preview__text {
    @apply relative z-10 flex flex-col gap-1;
  }

  .category-preview__label {
    @apply text-xs font-medium uppercase text-white/70;
    letter-spacing: 0.28em;
  }

  .category-preview__title {
    @apply text-lg font-semibold leading-snug;
  }

  .category-preview__meta {
    @apply text-xs uppercase text-white/70;
    letter-spacing: 0.22em;
  }

  .category-form__grid {
    @apply grid gap-6;
  }

  @screen md {
    .category-form__grid {
      grid-template-columns: minmax(0, 1.15fr) minmax(240px, 0.85fr);
      align-items: start;
      gap: 2rem;
    }
  }

  .category-form__field {
    @apply flex flex-col;
  }

  .category-form__field--full {
    grid-column: 1 / -1;
  }

  @screen md {
    .category-form__field--full {
      grid-column: 1 / -1;
    }

    .category-form__field--icon {
      grid-column: 1 / 2;
    }

    .category-form__field--color {
      grid-column: 2 / 3;
    }
  }

  .category-form__hint {
    @apply text-xs text-gray-400;
  }

  .category-field-card {
    @apply relative flex flex-col gap-2 rounded-2xl border border-gray-200/70 bg-white/90 p-3 shadow-sm;
    box-shadow: 0 18px 30px -30px rgba(15, 23, 42, 0.2);
  }

  .category-field-card--tall {
    @apply h-full;
  }

  .category-field-card__header {
    @apply flex items-center justify-between;
  }

  .category-field-card__meta {
    @apply text-xs text-gray-400;
  }

  .category-icon-picker {
    @apply mt-4 rounded-2xl border border-dashed border-gray-200 bg-slate-50/60 p-3;
  }

  .category-icon-picker:hover {
    box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.15);
  }

  @screen md {
    .category-field-card--tall {
      min-height: 100%;
    }
  }

  .category-color-picker__wrapper {
    @apply relative;
  }

  .category-color-picker {
    @apply w-full h-12 rounded-2xl border border-gray-200 cursor-pointer overflow-hidden;
    background: transparent;
    box-shadow: 0 18px 40px -30px rgba(59, 130, 246, 0.32);
  }

  .category-color-picker::-webkit-color-swatch-wrapper {
    padding: 0;
  }

  .category-color-picker::-webkit-color-swatch,
  .category-color-picker::-moz-color-swatch {
    border: none;
    border-radius: 16px;
  }

  .category-color-picker__badge {
    @apply absolute right-4 top-1/2 -translate-y-1/2 rounded-full bg-white/85 px-3 py-1 text-xs font-semibold uppercase text-gray-700;
    @apply backdrop-blur-sm;
    letter-spacing: 0.18em;
    box-shadow: 0 16px 26px -28px rgba(15, 23, 42, 0.35);
    pointer-events: none;
  }

  .category-modal__note {
    @apply flex items-start gap-3 rounded-2xl border border-blue-100/80 bg-blue-50/80 px-4 py-3 text-sm text-blue-600 leading-relaxed;
  }

  .category-modal__note-icon {
    @apply mt-0.5 flex h-8 w-8 items-center justify-center rounded-xl bg-blue-500/10 text-blue-500;
  }

  .category-modal__footer {
    @apply flex justify-end gap-3 pt-4 border-t border-gray-100;
  }

  .category-modal__btn {
    @apply px-6 py-2.5 rounded-xl transition-all duration-200;
  }

  .category-modal__btn--ghost {
    @apply text-gray-600 hover:bg-gray-50;
  }

  .category-modal__btn--primary {
    color: #fff;
    background: linear-gradient(135deg, #2563eb 0%, #4338ca 100%);
    box-shadow: 0 20px 38px -24px rgba(37, 99, 235, 0.55);
  }

  .category-modal__btn--primary:hover {
    box-shadow: 0 26px 48px -24px rgba(37, 99, 235, 0.65);
    transform: translateY(-1px);
  }

  .category-modal__btn--primary:active {
    transform: translateY(0);
  }

  .emoji-picker {
    @apply grid gap-2;
    grid-template-columns: repeat(auto-fill, minmax(46px, 1fr));
  }

  .emoji-picker--compact {
    @apply gap-1.5;
    grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
  }

  @screen md {
    .emoji-picker {
      grid-template-columns: repeat(5, minmax(0, 1fr));
    }
  }

  @screen lg {
    .emoji-picker {
      grid-template-columns: repeat(6, minmax(0, 1fr));
    }
  }

  .emoji-picker__item {
    @apply flex h-10 items-center justify-center rounded-xl border border-gray-200 bg-white text-xl transition-all duration-150 shadow-sm;
  }

  .emoji-picker--compact .emoji-picker__item {
    @apply h-9 text-lg rounded-lg;
  }

  .emoji-picker__item:hover {
    @apply border-blue-300 text-blue-500 shadow;
    transform: translateY(-1px);
  }

  .emoji-picker__item--active {
    @apply border-blue-400 text-blue-600 bg-blue-50;
    box-shadow: 0 16px 28px -24px rgba(37, 99, 235, 0.45);
    transform: translateY(-1px);
  }

  .toggle-switch {
    @apply relative inline-flex h-7 w-12 items-center rounded-full transition-all duration-200 cursor-pointer;
    box-shadow: inset 0 0 0 1px rgba(148, 163, 184, 0.3);
  }

  .toggle-switch-on {
    background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
    box-shadow: inset 0 -1px 0 rgba(255, 255, 255, 0.3);
  }

  .toggle-switch-off {
    background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%);
  }

  .toggle-switch-handle {
    @apply inline-block h-6 w-6 transform rounded-full bg-white shadow;
    @apply transition-transform duration-200 ease-in-out;
  }

  .stat-card {
    @apply relative overflow-hidden rounded-3xl p-5 text-sm;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(226, 232, 240, 0.45));
    border: 1px solid rgba(148, 163, 184, 0.18);
    box-shadow: 0 30px 60px -40px rgba(15, 23, 42, 0.3);
  }

  .stat-card::after {
    content: '';
    position: absolute;
    right: 24px;
    bottom: -40px;
    width: 160px;
    height: 160px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(59, 130, 246, 0.18) 0%, rgba(59, 130, 246, 0) 70%);
  }

  .search-box {
    @apply relative;
  }

  .search-input {
    @apply w-full pl-12 pr-4 py-3 bg-white;
    @apply border border-white rounded-2xl;
    @apply focus:border-blue-400 focus:ring-2 focus:ring-blue-200/80;
    @apply outline-none transition-all duration-200 placeholder:text-gray-400;
    box-shadow: 0 18px 42px -30px rgba(15, 23, 42, 0.28);
  }

  .search-icon {
    @apply absolute left-5 top-1/2 transform -translate-y-1/2 text-blue-400;
  }

  .toast-card {
    @apply card-modern p-5;
  }

  .fab {
    @apply fixed bottom-6 right-6 w-14 h-14 rounded-full;
    @apply bg-gradient-to-br from-blue-500 to-blue-600 text-white;
    @apply shadow-lg hover:shadow-xl transform hover:scale-110;
    @apply transition-all duration-200 flex items-center justify-center;
    @apply z-40;
  }

  /* New compact layout styles for modals */
  .category-form__row {
    @apply grid gap-4;
    grid-template-columns: 1fr 1fr;
  }

  .category-form__icon-section {
    @apply flex flex-col gap-2;
  }

  .category-form__color-section {
    @apply flex flex-col gap-2;
  }

  .icon-input-group {
    @apply flex flex-col gap-2;
  }

  .input-icon {
    @apply text-center text-2xl;
  }

  .emoji-grid-compact {
    @apply grid grid-cols-5 gap-1;
  }

  .emoji-btn-compact {
    @apply h-8 w-8 flex items-center justify-center rounded-lg border border-gray-200 bg-white text-lg transition-all duration-150;
  }

  .emoji-btn-compact:hover {
    @apply border-blue-300 bg-blue-50;
  }

  .emoji-btn-compact--active {
    @apply border-blue-400 bg-blue-100;
  }

  .color-input-group {
    @apply flex items-center gap-3;
  }

  .color-badge {
    @apply px-3 py-1 rounded-lg bg-gray-100 text-xs font-mono;
  }
}

@layer utilities {
  /* 滚动条样式 */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.gray.300') transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-transparent rounded-full;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full;
    @apply hover:bg-gray-400 transition-colors;
  }

  /* 文本截断 */
  .text-ellipsis-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* 玻璃态效果 */
  .glass {
    @apply bg-white/70 backdrop-blur-xl;
    @apply border border-white/20;
  }

  .glass-dark {
    @apply bg-gray-900/70 backdrop-blur-xl;
    @apply border border-gray-700/20;
  }

  /* 渐变背景 */
  .bg-gradient-mesh {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #667eea 75%, #764ba2 100%);
    background-size: 400% 400%;
    animation: gradient 15s ease infinite;
  }

  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* 装饰性元素 */

  /* 实时推送样式 */
  .log-highlight {
    animation: highlightFade 2s ease-out;
  }

  @keyframes highlightFade {
    0% {
      background-color: rgba(59, 130, 246, 0.2);
      transform: scale(1.02);
    }
    100% {
      background-color: transparent;
      transform: scale(1);
    }
  }

  /* 连接状态指示器 */
  .connection-connected {
    @apply w-2 h-2 bg-green-500 rounded-full;
    animation: pulse 2s infinite;
  }

  .connection-disconnected {
    @apply w-2 h-2 bg-gray-400 rounded-full;
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
}
