<!-- 仪表盘内容组件 -->
<section class="dashboard-content flex flex-col gap-8">
  <header class="dashboard-header flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between">
    <div>
      <h2 class="text-3xl font-semibold text-slate-900">提醒面板</h2>
      <p class="text-sm text-slate-500 mt-2">集中管理任务、分类与设备，以更紧凑的视图掌控所有推送节奏。</p>
    </div>
    <div class="flex flex-wrap gap-3">
      <div class="metric-pill">
        <span class="metric-pill__value" x-text="tasks.length"></span>
        <span class="metric-pill__label">提醒总数</span>
      </div>
      <div class="metric-pill">
        <span class="metric-pill__value text-emerald-500" x-text="tasks.filter(t => t.enabled).length"></span>
        <span class="metric-pill__label">正在进行</span>
      </div>
      <div class="metric-pill">
        <span class="metric-pill__value text-slate-500" x-text="devices.length"></span>
        <span class="metric-pill__label">使用设备</span>
      </div>
    </div>
  </header>

  <div class="insights-grid">
    <!-- 发送记录面板 -->
    <div class="surface-card execution-logs-panel">
      <div class="execution-logs-header">
        <h3 class="text-lg font-semibold text-gray-900">发送记录</h3>
        <div class="flex items-center gap-2">
          <select x-model="logsFilter" @change="loadExecutionLogs()" class="text-sm border rounded px-2 py-1">
            <option value="all">全部</option>
            <option value="success">成功</option>
            <option value="failed">失败</option>
          </select>
          <button @click="loadExecutionLogs()" class="text-blue-500 hover:text-blue-600">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
          </button>
        </div>
      </div>
      <div class="execution-logs-content">
        <template x-if="executionLogs && executionLogs.length > 0">
          <div class="space-y-2">
            <template x-for="log in executionLogs.slice(0, 5)" :key="log.id">
              <div class="execution-log-item" :class="log.status === 'success' ? 'log-success' : 'log-failed'">
                <div class="flex items-start justify-between">
                  <div class="flex-1">
                    <div class="flex items-center gap-2">
                      <span class="text-xs" x-text="log.status === 'success' ? '✅' : '❌'"></span>
                      <span class="font-medium text-sm" x-text="log.taskTitle"></span>
                    </div>
                    <div class="text-xs text-gray-500 mt-1">
                      <span x-text="log.deviceName"></span>
                      <span class="mx-1">·</span>
                      <span x-text="formatTime(log.timestamp)"></span>
                    </div>
                    <template x-if="log.error">
                      <div class="text-xs text-red-500 mt-1" x-text="log.error"></div>
                    </template>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </template>
        <template x-if="!executionLogs || executionLogs.length === 0">
          <div class="text-center text-gray-500 text-sm py-4">
            暂无发送记录
          </div>
        </template>
      </div>
      <template x-if="executionLogs && executionLogs.length > 5">
        <div class="execution-logs-footer">
          <button @click="showAllLogs()" class="text-blue-500 hover:text-blue-600 text-sm">
            查看全部 (<span x-text="executionLogs.length"></span>)
          </button>
        </div>
      </template>
    </div>
    <div class="surface-card quick-card">
      <h3 class="quick-card__title">今日概览</h3>
      <ul class="quick-card__list">
        <li class="quick-card__item">
          <span class="quick-card__label">启用中的提醒</span>
          <span class="quick-card__value text-emerald-500" x-text="tasks.filter(t => t.enabled).length + ' 个'"></span>
        </li>
        <li class="quick-card__item">
          <span class="quick-card__label">待分类提醒</span>
          <span class="quick-card__value text-blue-500" x-text="tasks.filter(t => !t.categoryId || t.categoryId === 'default').length + ' 个'"></span>
        </li>
        <li class="quick-card__item">
          <span class="quick-card__label">可用分类</span>
          <span class="quick-card__value" x-text="categories.length + ' 类'"></span>
        </li>
        <li class="quick-card__item">
          <span class="quick-card__label">绑定设备</span>
          <span class="quick-card__value" x-text="devices.length + ' 台'"></span>
        </li>
      </ul>
    </div>
  </div>
</section>
